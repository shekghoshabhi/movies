(this.webpackJsonpmovies=this.webpackJsonpmovies||[]).push([[0],{38:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(26),s=n.n(c),r=(n(38),n(12)),i=n.n(r),o=n(16),l=n(27),h=n(28),u=n(29),j=n(33),d=n(32);var b=n(13),m=n.n(b),v=n(0),g=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(h.a)(this,n),(e=t.call(this)).handleChange=function(t){var n=t.target.value;console.log(n),e.setState({currSearchText:n})},e.onDelete=function(t){var n=e.state.movies.filter((function(e){return e._id!==t}));e.setState({movies:n})},e.sortByRatings=function(t){var n=t.target.className;console.log(n);var a=[];a="fa fa-sort-asc"==n?e.state.movies.sort((function(e,t){return e.dailyRentalRate-t.dailyRentalRate})):e.state.movies.sort((function(e,t){return t.dailyRentalRate-e.dailyRentalRate})),e.setState({movies:a})},e.sortByStock=function(t){var n=t.target.className;console.log(n);var a=[];a="fa fa-sort-asc"==n?e.state.movies.sort((function(e,t){return e.numberInStock-t.numberInStock})):e.state.movies.sort((function(e,t){return t.numberInStock-e.numberInStock})),e.setState({movies:a})},e.handlePageChange=function(t){e.setState({currPage:t})},e.handleGenreChange=function(t){e.setState({cGenre:t})},e.state={movies:[],currSearchText:"",currPage:1,genres:[{_id:"abcd",name:"All Genres"}],cGenre:"All Genres"},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Component DID Mount"),e.next=3,m.a.get("https://backend-react-movie.herokuapp.com/movies");case 3:return t=e.sent,e.next=6,m.a.get("https://backend-react-movie.herokuapp.com/genres");case 6:n=e.sent,console.log(n.data.genres),this.setState({movies:t.data.movies,genres:[].concat(Object(o.a)(this.state.genres),Object(o.a)(n.data.genres))});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;console.log("render");var t=this.state,n=t.movies,a=t.currSearchText,c=t.currPage,s=t.genres,r=t.cGenre,i=[];i=""===a?n:n.filter((function(e){var t=e.title.toLowerCase();return console.log(t),t.includes(a.toLowerCase())})),"All Genres"!=r&&(i=i.filter((function(e){return e.genre.name==r})));for(var o=Math.ceil(i.length/4),l=[],h=0;h<o;h++)l.push(h+1);var u=4*(c-1),j=u+4;return i=i.slice(u,j),Object(v.jsx)(v.Fragment,{children:0==this.state.movies.length?Object(v.jsx)("div",{className:"spinner-border text-primary",role:"status",children:Object(v.jsx)("span",{class:"visually-hidden",children:"Loading..."})}):Object(v.jsx)("div",{className:"container",children:Object(v.jsxs)("div",{className:"row",children:[Object(v.jsxs)("div",{className:"col-3",children:[Object(v.jsx)("ul",{className:"list-group",children:s.map((function(t){return Object(v.jsx)("li",{onClick:function(){return e.handleGenreChange(t.name)},className:"list-group-item",children:t.name},t._id)}))}),Object(v.jsxs)("h5",{children:["Current Genre : ",r]})]}),Object(v.jsxs)("div",{className:"col-9",children:[Object(v.jsx)("input",{type:"search",value:this.state.currSearchText,onChange:this.handleChange}),Object(v.jsxs)("table",{className:"table",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{scope:"col",children:"#"}),Object(v.jsx)("th",{scope:"col",children:"Title"}),Object(v.jsx)("th",{scope:"col",children:"Genre"}),Object(v.jsxs)("th",{scope:"col",children:[Object(v.jsx)("i",{onClick:this.sortByStock,className:"fa fa-sort-asc","aria-hidden":"true"}),"Stock",Object(v.jsx)("i",{onClick:this.sortByStock,className:"fa fa-sort-desc","aria-hidden":"true"})]}),Object(v.jsxs)("th",{scope:"col",children:[Object(v.jsx)("i",{onClick:this.sortByRatings,className:"fa fa-sort-asc","aria-hidden":"true"}),"Rate",Object(v.jsx)("i",{onClick:this.sortByRatings,className:"fa fa-sort-desc","aria-hidden":"true"})]}),Object(v.jsx)("th",{})]})}),Object(v.jsx)("tbody",{children:i.map((function(t){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{}),Object(v.jsx)("td",{children:t.title}),Object(v.jsx)("td",{children:t.genre.name}),Object(v.jsx)("td",{children:t.numberInStock}),Object(v.jsx)("td",{children:t.dailyRentalRate}),Object(v.jsx)("td",{children:Object(v.jsx)("button",{onClick:function(){e.onDelete(t._id)},type:"button",className:"btn btn-danger",children:"Delete"})})]},t._id)}))})]}),Object(v.jsx)("nav",{"aria-label":"...",children:Object(v.jsx)("ul",{className:"pagination",children:l.map((function(t){var n=t==c?"page-item active":"page-item";return Object(v.jsx)("li",{onClick:function(){return e.handlePageChange(t)},className:n,children:Object(v.jsx)("span",{className:"page-link",children:t})},t)}))})})]})]})})})}}]),n}(a.Component);var x=function(){return Object(v.jsx)("div",{children:Object(v.jsx)("h1",{children:"This is the home commponent"})})},O=n(30),f=n(2);var p=function(){return Object(v.jsx)(O.a,{children:Object(v.jsxs)(f.c,{children:[Object(v.jsx)(f.a,{path:"/",exact:!0,component:x}),Object(v.jsx)(f.a,{path:"/movies",component:g})]})})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,65)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))};s.a.render(Object(v.jsx)(p,{}),document.getElementById("root")),k()}},[[64,1,2]]]);
//# sourceMappingURL=main.fca460b4.chunk.js.map